!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t="undefined"!=typeof globalThis?globalThis:t||self).RememberScroll=n()}(this,function(){"use strict";function t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function n(t,n,e){return t(e={path:n,exports:{},require:function(t,n){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==n&&e.path)}},e.exports),e.exports}function o(t){return"object"==typeof t?null!==t:"function"==typeof t}function r(t){if(!o(t))throw TypeError(t+" is not an object!");return t}function c(t,n){return m.call(t,n)}function y(r,o,t){if(!function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!")}(r),void 0===o)return r;switch(t){case 1:return function(t){return r.call(o,t)};case 2:return function(t,n){return r.call(o,t,n)};case 3:return function(t,n,e){return r.call(o,t,n,e)}}return function(){return r.apply(o,arguments)}}var e=t(n(function(t){t.exports=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")},t.exports.default=t.exports,t.exports.__esModule=!0})),i=t(n(function(t){function r(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,n,e){return n&&r(t.prototype,n),e&&r(t,e),t},t.exports.default=t.exports,t.exports.__esModule=!0})),d=n(function(t){t=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)}),v=n(function(t){t=t.exports={version:"2.6.12"};"number"==typeof __e&&(__e=t)}),u=function(t){try{return!!t()}catch(t){return!0}},p=!u(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),s=d.document,l=o(s)&&o(s.createElement),f=!p&&!u(function(){return 7!=Object.defineProperty(l?s.createElement("div"):{},"a",{get:function(){return 7}}).a}),a=Object.defineProperty,h={f:p?Object.defineProperty:function(t,n,e){if(r(t),n=function(t,n){if(!o(t))return t;var e,r;if(n&&"function"==typeof(e=t.toString)&&!o(r=e.call(t)))return r;if("function"==typeof(e=t.valueOf)&&!o(r=e.call(t)))return r;if(!n&&"function"==typeof(e=t.toString)&&!o(r=e.call(t)))return r;throw TypeError("Can't convert object to primitive value")}(n,!0),r(e),f)try{return a(t,n,e)}catch(t){}if("get"in e||"set"in e)throw TypeError("Accessors not supported!");return"value"in e&&(t[n]=e.value),t}},g=p?function(t,n,e){return h.f(t,n,{enumerable:!((n=1)&n),configurable:!(2&n),writable:!(4&n),value:e})}:function(t,n,e){return t[n]=e,t},m={}.hasOwnProperty,b=0,S=Math.random(),w=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++b+S).toString(36))},_=n(function(t){var n="__core-js_shared__",e=d[n]||(d[n]={});(t.exports=function(t,n){return e[t]||(e[t]=void 0!==n?n:{})})("versions",[]).push({version:v.version,mode:"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})}),O=_("native-function-to-string",Function.toString),j=n(function(t){var i=w("src"),n="toString",u=(""+O).split(n);v.inspectSource=function(t){return O.call(t)},(t.exports=function(t,n,e,r){var o="function"==typeof e;o&&(c(e,"name")||g(e,"name",n)),t[n]!==e&&(o&&(c(e,i)||g(e,i,t[n]?""+t[n]:u.join(String(n)))),t===d?t[n]=e:r?t[n]?t[n]=e:g(t,n,e):(delete t[n],g(t,n,e)))})(Function.prototype,n,function(){return"function"==typeof this&&this[i]||O.call(this)})}),x="prototype",E=function(t,n,e){var r,o,i,u=t&E.F,c=t&E.G,s=t&E.S,l=t&E.P,f=t&E.B,a=c?d:s?d[n]||(d[n]={}):(d[n]||{})[x],p=c?v:v[n]||(v[n]={}),h=p[x]||(p[x]={});for(r in e=c?n:e)o=((i=!u&&a&&void 0!==a[r])?a:e)[r],i=f&&i?y(o,d):l&&"function"==typeof o?y(Function.call,o):o,a&&j(a,r,o,t&E.U),p[r]!=o&&g(p,r,i),l&&h[r]!=o&&(h[r]=o)};d.core=v,E.F=1,E.G=2,E.S=4,E.P=8,E.B=16,E.W=32,E.U=64,E.R=128;function T(t){return L.call(t).slice(8,-1)}function P(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}function k(t){return N(P(t))}function M(t){return isNaN(t=+t)?0:(0<t?C:q)(t)}function I(t){return 0<t?R(M(t),9007199254740991):0}function K(t){return Object(P(t))}var A,F,H=E,L={}.toString,N=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==T(t)?t.split(""):Object(t)},q=Math.ceil,C=Math.floor,R=Math.min,z=Math.max,B=Math.min,D=_("keys"),G=(A=!1,function(t,n,e){var r,o=k(t),i=I(o.length),u=(t=i,(e=M(e=e))<0?z(e+t,0):B(e,t));if(A&&n!=n){for(;u<i;)if((r=o[u++])!=r)return!0}else for(;u<i;u++)if((A||u in o)&&o[u]===n)return A||u||0;return!A&&-1}),J=D[F="IE_PROTO"]||(D[F]=w(F)),U="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),W=Object.keys||function(t){return function(t,n){var e,r=k(t),o=0,i=[];for(e in r)e!=J&&c(r,e)&&i.push(e);for(;n.length>o;)c(r,e=n[o++])&&(~G(i,e)||i.push(e));return i}(t,U)},Y={f:Object.getOwnPropertySymbols},Q={f:{}.propertyIsEnumerable},V=Object.assign,u=!V||u(function(){var t={},n={},e=Symbol(),r="abcdefghijklmnopqrst";return t[e]=7,r.split("").forEach(function(t){n[t]=t}),7!=V({},t)[e]||Object.keys(V({},n)).join("")!=r})?function(t,n){for(var e=K(t),r=arguments.length,o=1,i=Y.f,u=Q.f;o<r;)for(var c,s=N(arguments[o++]),l=i?W(s).concat(i(s)):W(s),f=l.length,a=0;a<f;)c=l[a++],p&&!u.call(s,c)||(e[c]=s[c]);return e}:V;H(H.S+H.F,"Object",{assign:u});function X(t,n){return Z(t=t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!Z(e.prototype)||(e=void 0),o(e)&&null===(e=e[$])&&(e=void 0)),new(void 0===e?Array:e)(n);var e}var Z=Array.isArray||function(t){return"Array"==T(t)},u=n(function(t){var n=_("wks"),e=d.Symbol,r="function"==typeof e;(t.exports=function(t){return n[t]||(n[t]=r&&e[t]||(r?e:w)("Symbol."+t))}).store=n}),$=u("species"),tt=u("unscopables"),nt=Array.prototype;null==nt[tt]&&g(nt,tt,{});var et,rt,ot,it,ut,ct,st,lt,ft,at=(ot=1==(et=6),it=2==et,ut=3==et,ct=4==et,st=6==et,lt=5==et||st,ft=rt||X,function(t,n,e){for(var r,o,i=K(t),u=N(i),c=y(n,e,3),s=I(u.length),l=0,f=ot?ft(t,s):it?ft(t,0):void 0;l<s;l++)if((lt||l in u)&&(o=c(r=u[l],l,i),et))if(ot)f[l]=o;else if(o)switch(et){case 3:return!0;case 5:return r;case 6:return l;case 2:f.push(r)}else if(ct)return!1;return st?-1:ut||ct?ct:f}),pt="findIndex",ht=!0;pt in[]&&Array(1)[pt](function(){ht=!1}),H(H.P+H.F*ht,"Array",{findIndex:function(t){return at(this,t,1<arguments.length?arguments[1]:void 0)}}),nt[tt][pt]=!0;var yt={isSupport:function(){return!!window.localStorage||(console.error("Your browser cannot support localStorage!"),!1)},get:function(t){if(this.isSupport){t=window.localStorage.getItem(t);return t?JSON.parse(t):void 0}},remove:function(t){this.isSupport&&window.localStorage.removeItem(t)},set:function(t,n){this.isSupport&&(n=JSON.stringify(n),window.localStorage.setItem(t,n))}};return function(){function n(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};e(this,n),this.isSupport=yt.isSupport(),this.isSupport&&(this.storageKey="__rememberScroll__",this._eventHandler=null,this.options=Object.assign({},{pageKey:"_page1",maxLength:5},t),this.list=yt.get(this.storageKey)||[],this.initScroll(),this.addScrollEvent())}return i(n,[{key:"initScroll",value:function(){var t,n=this;!this.list.length||0<=(t=this.list.findIndex(function(t){return t.pageKey===n.options.pageKey}))&&setTimeout(function(){n.scrollTo(0,n.list[t].y),n._moveToHead(t)},0)}},{key:"scrollTo",value:function(t,n){window.scrollTo(t,n)}},{key:"updateScroll",value:function(){var t=document.documentElement.scrollTop||document.body.scrollTop,n={pageKey:this.options.pageKey,y:t},t=this.list.findIndex(function(t){return t.pageKey===n.pageKey});0<=t?this.list.splice(t,1):this.list.length>=this.options.maxLength&&this.list.shift(),this.list.push(n),yt.set(this.storageKey,this.list)}},{key:"addScrollEvent",value:function(){var t,n,e,r,o;this._eventHandler=(t=this.updateScroll.bind(this),n=100,function(){r=this,o=arguments,e=e||setTimeout(function(){e=null,t.apply(r,o)},n)}),window.addEventListener("scroll",this._eventHandler)}},{key:"_moveToHead",value:function(t){this.list.length&&this.list[t]&&t!==this.list.length-1&&(t=this.list.splice(t,1),this.list.push(t))}},{key:"destory",value:function(){window.removeEventListener("scroll",this._eventHandler)}}]),n}()});
