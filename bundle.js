!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).RememberScroll=t()}(this,function(){"use strict";var e=require("./_export"),i=require("./_array-methods")(6),t="findIndex",o=!0;t in[]&&Array(1)[t](function(){o=!1}),e(e.P+e.F*o,"Array",{findIndex:function(e,t){return i(this,e,1<arguments.length?t:void 0)}}),require("./_add-to-unscopables")(t);var e=require("./_export"),n=require("./_array-methods")(5),t="find",r=!0;t in[]&&Array(1)[t](function(){r=!1}),e(e.P+e.F*r,"Array",{find:function(e,t){return n(this,e,1<arguments.length?t:void 0)}}),require("./_add-to-unscopables")(t);t=require("./_export");function s(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}t(t.S+t.F,"Object",{assign:require("./_object-assign")});var l={isSupport:function(){return!!window.localStorage||(console.error("Your browser cannot support localStorage!"),!1)},get:function(e){if(this.isSupport){e=window.localStorage.getItem(e);return e?JSON.parse(e):void 0}},remove:function(e){this.isSupport&&window.localStorage.removeItem(e)},set:function(e,t){this.isSupport&&(t=JSON.stringify(t),window.localStorage.setItem(e,t))}};return function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.isSupport=l.isSupport(),this.isSupport&&(this.timer=null,this.storageKey="_rememberScroll",this.options=Object.assign({},{pageKey:"_page1",maxLength:5},e),this.list=l.get(this.storageKey)||[],this.initScroll(),this.addScrollEvent())}var e,i,o;return e=t,(i=[{key:"initScroll",value:function(){var e,t=this;!this.list.length||(e=this.list.find(function(e){return e.pageKey===t.options.pageKey}))&&setTimeout(function(){t.scrollTo(0,e.y)},0)}},{key:"scrollTo",value:function(e,t){window.scrollTo(e,t)}},{key:"updateScroll",value:function(e){var t={pageKey:this.options.pageKey,y:e},e=this.list.findIndex(function(e){return e.pageKey===t.pageKey});0<=e?this.list.splice(e,1,t):(this.list.length>=this.options.maxLength&&this.list.shift(),this.list.push(t)),l.set(this.storageKey,this.list)}},{key:"addScrollEvent",value:function(){var t=this;window.addEventListener("scroll",function(){clearTimeout(t.timer);var e=document.documentElement.scrollTop||document.body.scrollTop;t.timer=setTimeout(function(){t.updateScroll(e)},200)})}}])&&s(e.prototype,i),o&&s(e,o),t}()});
